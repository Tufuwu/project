diff --git a/.travis.yml b/.travis.yml
index 78ba175cd3d..5ae946cdb3d 100644
-- a/.travis.yml
+++ b/.travis.yml
@@ -2,27 +2,33 @@
 # Author: Ivan Mincik, ivan.mincik@gmail.com (linux)
 #         Rainer M. Krug, Rainer@krugs.de (osx)
 
+os: linux
+dist: jammy
 language: c
 cache: ccache
 
matrix:
+# safelist
+branches:
+  only:
+  - main
+  - releasebranch*
+
+jobs:
   include:
     - os: linux
      dist: focal
       compiler: gcc
      sudo: required
       env: CC=gcc CXX=g++
 
     - os: linux
      dist: focal
       compiler: clang
      sudo: required
       env: CC=clang CXX=clang++
 
 env:
   global:
     - CFLAGS="-Werror=implicit-function-declaration"
    - CXXFLAGS="-std=c++11"
+    - CXXFLAGS="-std=c++17"
+    - GRASS_EXTRA_CFLAGS="-Werror -fPIC -Wfatal-errors"
+    - GRASS_EXTRA_CXXFLAGS="-Werror -fPIC -Wfatal-errors"
 
 before_install:
   - ./.travis/$TRAVIS_OS_NAME.before_install.sh
@@ -32,9 +38,3 @@ install:
 
 script:
   - ./.travis/$TRAVIS_OS_NAME.script.sh

after_success:
  - bash < (curl -s https://codecov.io/bash)

notifications:
  irc: chat.freenode.net#grass
