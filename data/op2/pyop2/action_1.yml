 name: CI
 
-#on: pull_request
-on: push
on: pull_request
 
 jobs:
   test:
@@ -16,9 +15,9 @@ jobs:
       - name: Install system dependencies
         shell: bash
         run: |
-          sudo apt install build-essential python3-dev git python3-pip \
-                      libopenmpi-dev openmpi-bin libblas-dev \
-                      liblapack-dev gfortran
          sudo apt install  \
            build-essential python3-dev git python3-pip libopenmpi-dev  \
            openmpi-bin libblas-dev liblapack-dev gfortran
 
       - name: Set correct Python version
         uses: actions/setup-python@v2
@@ -26,6 +25,7 @@ jobs:
           python-version: '3.6'
 
       # xargs is used to force installation of requirements in the order we specified.
      # pip 20.2 needed for loopy install to work.
       - name: Install Python dependencies
         shell: bash
         run: |
@@ -44,23 +44,3 @@ jobs:
         run: |
           make lint
           py.test test -v --tb=native
-
-#      - name: Build documentation
-#        if: ${{ github.actions}}
-#        shell: bash
-#        run: |
-#          source /home/firedrake/firedrake/bin/activate
-#          cd $VIRTUAL_ENV/src/PyOP2/doc/sphinx
-#          git pull
-#          make html
-#          mv build/html $GITHUB_WORKSPACE
-#
-#      - name: Upload to GitHub Pages
-#        uses: crazy-max/ghaction-github-pages@v2.2.0
-#        with:
-#          build_dir: html
-#          jekyll: false
-#        env:
-#          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
-#  
-#
\ No newline at end of file
