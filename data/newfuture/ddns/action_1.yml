         run: |
           python -m pip install --upgrade pip
           pip install build
-      - run: sed -i -e "s#\${BUILD_SOURCEBRANCHNAME}#${{ github.ref_name }}#" -e "s/\${BUILD_DATE}/$(date --iso-8601=seconds)/" run.py
      - run: sed -i -e "s#\${BUILD_VERSION}#${{ github.ref_name }}#" -e "s/\${BUILD_DATE}/$(date --iso-8601=seconds)/" run.py
       - name: Build package
         run: python -m build --sdist --wheel --outdir dist/
 
@@ -54,7 +54,7 @@ jobs:
         with:
           name: pypi
           path: dist/
-          retention-days: 7
          retention-days: 5
 
   pyinstaller:
     strategy:
@@ -75,10 +75,10 @@ jobs:
 
       # Prepare build version and cert
       - name: Replace build version
-        run: sed -i${{ fromJSON('["",".temp"]')[matrix.os == 'macos'] }} -e "s#\${BUILD_SOURCEBRANCHNAME}#${{ github.ref_name }}#" -e "s/\${BUILD_DATE}/$(date --iso-8601=seconds)/" run.py
        run: sed -i.tmp -e "s#\${BUILD_VERSION}#${{ github.ref_name }}#" -e "s/\${BUILD_DATE}/$(date --iso-8601=seconds)/" run.py && rm run.py.tmp
         shell: bash
       - name: Copy cert on ubuntu
-        if: ${{ matrix.os == 'ubuntu' }}
        if: runner.os == 'Linux'
         run: cp /etc/ssl/certs/ca-certificates.crt cert.pem && export SSL_CERT_FILE=${PWD}/cert.pem
 
       - run: python ./run.py -h
@@ -94,14 +94,14 @@ jobs:
         with:
           name: ${{ matrix.os }}-py${{ matrix.python-version }}
           path: dist/
-          retention-days: 14
          retention-days: 7
 
   docker:
     runs-on: ubuntu-latest
     timeout-minutes: 5
     steps:
       - uses: actions/checkout@v3
-      - run: sed -i -e "s#\${BUILD_SOURCEBRANCHNAME}#${{ github.ref_name }}#" -e "s/\${BUILD_DATE}/$(date --iso-8601=seconds)/" run.py
      - run: sed -i -e "s#\${BUILD_VERSION}#${{ github.ref_name }}#" -e "s/\${BUILD_DATE}/$(date --iso-8601=seconds)/" run.py
       - uses: docker/build-push-action@v3
         with:
           context: .
@@ -143,7 +143,7 @@ jobs:
       packages: write
     steps:
       - uses: actions/checkout@v3
-      - run: sed -i -e "s#\${BUILD_SOURCEBRANCHNAME}#${{ github.ref_name }}#" -e "s/\${BUILD_DATE}/$(date --iso-8601=seconds)/" run.py
      - run: sed -i -e "s#\${BUILD_VERSION}#${{ github.ref_name }}#" -e "s/\${BUILD_DATE}/$(date --iso-8601=seconds)/" run.py
       - uses: docker/setup-qemu-action@v2
       - uses: docker/setup-buildx-action@v2
       - uses: docker/login-action@v2
